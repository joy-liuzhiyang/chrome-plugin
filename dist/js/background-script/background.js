(()=>{"use strict";var __webpack_modules__={5571:function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.updatePulishStatus=t.getInitLoginInfo=void 0;var o=r(6971),i=r(7753);t.getInitLoginInfo=function(){return new Promise((function(e,t){chrome.storage.sync.get(["ihrResumeData"],(function(t){if(t.ihrResumeData){var r=n({},JSON.parse(t.ihrResumeData));(new o.default).get(r.url+"/gateway/component/manage/api/component/topbar/theme",null).then((function(t){401===t.status?e(null):e(r)}))}else e(null)}))}))};t.updatePulishStatus=function(e,t){return i.fetchHttpRequest(e+"/gateway/recruit/api/jd/channel/publish","post",t)}},7536:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(5571),o=function(){var e=this;this.initMessageListener=function(){chrome.runtime.onMessage.addListener((function(e,t,r){switch(console.log("***!!!!! initMessageListener ",e),e.type){case"register":this.register(e,t),r("收到")}}))},this.initMeListener=function(){chrome.webRequest.onCompleted.addListener((function(t){setTimeout((function(){chrome.tabs.sendMessage(t.tabId,{form:"background",to:"content",type:"user_me"},(function(r){console.log("!!!!!!!!!!!!",r,e.currentRegisterUrl),(!e.currentRegisterUrl||!e.currentRegisterUrl.data||r.currentCompany&&r.currentCompany.companyId!==e.currentRegisterUrl.data.companyId)&&(e.currentRegisterUrl={url:t.initiator,data:r,tabId:t.tabId},chrome.storage.sync.set({ihrResumeData:JSON.stringify(e.currentRegisterUrl)}),e.triggerCallBack())}))}),1e3)}),{urls:["*://*/web/gateway/authcenter/delegate/user/me"]},[])},this.initLogoutListener=function(){chrome.webRequest.onBeforeRedirect.addListener((function(t){t.initiator===e.currentRegisterUrl.url&&(e.currentRegisterUrl=null,chrome.storage.sync.set({ihrResumeData:null}),e.triggerCallBack())}),{urls:["*://*/gateway/pre_logout"]},[])},this.loginStatusChange=function(t){e.loginStatusChangeFun=t,e.triggerCallBack()},this.triggerCallBack=function(){e.loginStatusChangeFun&&e.loginStatusChangeFun({isLogin:!!e.currentRegisterUrl,data:e.currentRegisterUrl&&e.currentRegisterUrl.data?e.currentRegisterUrl.data:null,url:e.currentRegisterUrl?e.currentRegisterUrl.url:null})},this.initMessageListener(),this.initMeListener(),this.initLogoutListener(),this.currentRegisterUrl=null,n.getInitLoginInfo().then((function(t){t&&!e.currentRegisterUrl&&(e.currentRegisterUrl=t,e.triggerCallBack())})),window.loginStatusChange=this.loginStatusChange,window.logout=function(){e.currentRegisterUrl=null,chrome.storage.sync.set({ihrResumeData:null}),e.triggerCallBack()}};t.default=o},919:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(8499),o=function(){window.version=n.default[n.default.length-1].version,window.allVersionInfo=n.default};t.default=o},8499:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=[{version:"1.0",info:["1.新增发布职位功能","2.新增保存简历功能"]}]},7753:function(__unused_webpack_module,exports,__webpack_require__){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,s)}a((n=n.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.isRecruitPublic=exports.fetchHttpRequest=exports.webJudge=exports.isIhrLogin=exports.getCookie=void 0;var http_1=__webpack_require__(6971),getCookie=function(e,t){void 0===t&&(t=document.cookie);for(var r=0,n=(t||"").split("; ");r<n.length;r++){var o=n[r].split("=");if(o[0]===e)return o[1]}return""};exports.getCookie=getCookie;var isIhrLogin=function(e){return void 0===e&&(e=location.href),e.includes("web/page/single")&&e.includes("ihr360.com")};function timePromise(e){return void 0===e&&(e=100),new Promise((function(t){setTimeout((function(){t(null)}),e)}))}exports.isIhrLogin=isIhrLogin;var getDomWrap=function getDomWrap(resolve,domString){eval(domString)?resolve(eval(domString)):setTimeout((function(){return getDomWrap(resolve,domString)}),50)},getDomWrapPromise=function(e){return new Promise((function(t){getDomWrap(t,e)}))},getDom=function(e){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(t){return[2,Promise.race([timePromise(3e3),getDomWrapPromise(e)])]}))}))},getBossResumeHTML=function(){return __awaiter(void 0,void 0,void 0,(function(){var e,t,r,n;return __generator(this,(function(o){switch(o.label){case 0:return e={fileContent:null,errorInfo:null},t=document.querySelector(".side-menu .router-link-active").getAttribute("ka"),["menu-geek-recommend"].includes(t)?(r=document.querySelector('[name="recommendFrame"]'))?r.contentDocument.querySelector(".resume-dialog")?[3,2]:[4,getDom('document.querySelector(\'[name="recommendFrame"]\').contentDocument.querySelector("#resume-page .resume-item-content")')]:[3,4]:[3,6];case 1:return(n=o.sent())?e.fileContent=n.outerHTML:e.errorInfo="未检测到简历详情",[3,3];case 2:e.errorInfo="请先打开简历详情,在尝试解析",o.label=3;case 3:return[3,5];case 4:e.errorInfo="请先打开简历详情,在尝试解析",o.label=5;case 5:return[3,14];case 6:return["menu-geek-search"].includes(t)?document.querySelector(".dialog-resume-full.search-resume")?[3,7]:(e.errorInfo="请先打开简历详情,在尝试解析",[3,9]):[3,10];case 7:return[4,getDom("document.querySelector('.dialog-resume-full.search-resume').querySelector(\".resume-dialog\")")];case 8:(n=o.sent())?e.fileContent=n.outerHTML:e.errorInfo="未检测到简历详情",o.label=9;case 9:return[3,14];case 10:if(!["menu-im"].includes(t))return[3,14];o.label=11;case 11:return o.trys.push([11,13,,14]),document.querySelector(".conversation-hd-box").children[1].click(),[4,getDom("document.querySelector('.resume-detail')")];case 12:return(n=o.sent())?e.fileContent=n.outerHTML:e.errorInfo="未检测到简历详情",[3,14];case 13:return o.sent(),e.errorInfo="未检测到简历详情",[3,14];case 14:return[2,e]}}))}))},webJudge=function(e,t){return __awaiter(void 0,void 0,void 0,(function(){var e,r,n,o;return __generator(this,(function(i){switch(i.label){case 0:e=location.href,r=document.querySelector("body").outerHTML,n=null,i.label=1;case 1:return i.trys.push([1,15,,16]),e.includes("zhaopin.com/resume/detail")?(document.querySelector(".resume-detail--default")&&(r=document.querySelector(".resume-detail--default").outerHTML),[3,14]):[3,2];case 2:return e.includes("51job.com/Candidate/ResumeViewFolderV2.aspx")?(document.querySelector("#divResume")&&(r=document.querySelector("#divResume").outerHTML),[3,14]):[3,3];case 3:return e.includes("lagou.com/can/new/index.htm")?(document.querySelector(".lg-modal-content")?r=document.querySelector(".lg-modal-content").outerHTML:n="请先打开简历详情,在尝试解析",[3,14]):[3,4];case 4:if(!e.includes("lagou.com/can/new/details.htm"))return[3,9];i.label=5;case 5:return i.trys.push([5,7,,8]),document.querySelector(".rc-tabs-nav-animated").children[0].children[0].click(),[4,timePromise(200)];case 6:return i.sent(),[3,8];case 7:return i.sent(),[3,8];case 8:return document.querySelector(".scroll-view")&&(r=document.querySelector(".scroll-view").outerHTML),[3,14];case 9:return e.includes("liepin.com/cvview/showresumedetail")?(document.querySelector("#water-mark-wrap")&&(r=document.querySelector("#water-mark-wrap").outerHTML),[3,14]):[3,10];case 10:return e.includes("ganji.com/resume_received/index")?(document.querySelector("resume-content")&&(r=document.querySelector("resume-content").outerHTML),[3,14]):[3,11];case 11:return e.includes("58.com/resumedetail/")?(document.querySelector(".resDetailRight")&&(r=document.querySelector(".resDetailRight").outerHTML),[3,14]):[3,12];case 12:return e.includes("zhipin.com/web/boss/recommend")||e.includes("zhipin.com/web/boss/search")||e.includes("zhipin.com/web/boss/index")?[4,getBossResumeHTML()]:[3,14];case 13:(o=i.sent()).errorInfo?n=o.errorInfo:r=o.fileContent,i.label=14;case 14:return[3,16];case 15:return i.sent(),r=document.querySelector("body").outerHTML,[3,16];case 16:return t({siteUrl:e,title:document.title,fileContent:r,errorInfo:n}),[2]}}))}))};exports.webJudge=webJudge;var fetchHttpRequest=function(e,t,r,n){return void 0===n&&(n={}),new Promise((function(o,i){try{chrome.cookies.getAll({url:"https://"+/^http(s)?:\/\/(.*?)\//.exec(e)[2]},(function(i){o((new http_1.default)[t](e,r,__assign({"X-XSRF-TOKEN":i.find((function(e){return"XSRF-TOKEN"===e.name})).value},n)))}))}catch(e){i("url 格式不正确")}}))};function isRecruitPublic(){return location.href.includes(".51job.com/Jobs/JobEdit.aspx?Mark=New")?"qiancheng":location.href.includes(".zhipin.com/web/boss/job/edit?encryptId=0")?"boss":location.href.includes(".lagou.com/position/multiChannel/createPosition.htm")?"lagou":location.href.includes(".zhaopin.com/job/publish")?"zhilian":location.href.includes(".liepin.com/ejobedit/editsocietyejob?ejobActionType=publish")?"liepin":location.href.includes(".ganji.com/pub/pub.php")&&location.href.includes("_pdt=zhaopin")?"ganji":!!location.href.includes(".58.com/zhaopin/")&&"58"}exports.fetchHttpRequest=fetchHttpRequest,exports.isRecruitPublic=isRecruitPublic},6971:function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,s)}a((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(7753),s=function(){function e(e){var t=this;void 0===e&&(e=!0),this.handlerErr=function(e,t){return Promise.reject("网络异常，请稍后重试！"+t)},this.dealRequestHeader=function(){return{"X-XSRF-TOKEN":u.getCookie("XSRF-TOKEN")}},this.get=function(e,r,n){void 0===n&&(n={});var u=t.serializeParma(e,r);return t.fetchData(u,"get",{},n).then((function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return t={status:e.status},[4,e.json()];case 1:return[2,(t.res=r.sent(),t)]}}))}))})).then((function(e){return e}))},this.post=function(e,r,n,u,s){return void 0===n&&(n={}),void 0===u&&(u=!1),void 0===s&&(s="json"),t.fetchData(e,"post",r,n,u,s).then((function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return t={status:e.status},[4,e.json()];case 1:return[2,(t.res=r.sent(),t)]}}))}))})).then((function(e){return e}))},this.put=function(e,r,n,u,s){return void 0===n&&(n={}),void 0===u&&(u=!1),void 0===s&&(s="json"),t.fetchData(e,"put",r,n,u,s).then((function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return t={status:e.status},[4,e.json()];case 1:return[2,(t.res=r.sent(),t)]}}))}))})).then((function(e){return e}))},this.delete=function(e,r,n){return void 0===n&&(n={}),t.fetchData(e,"delete",r,n).then((function(e){return o(t,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return t={status:e.status},[4,e.json()];case 1:return[2,(t.res=r.sent(),t)]}}))}))})).then((function(e){return e}))},this.serializeParma=function(e,t){var r=e;if(t){var n=[];Object.keys(t).forEach((function(e){return n.push(e+"="+t[e])})),-1===e.search(/\?/)?r+="?"+n.join("&"):r+="&"+n.join("&")}return r},this.contentType="application/json;charset=UTF-8",this.isIhr=e,this.credentials="include",this.mode="cors",this.xsrfToken="",this.showDefaultErrorTip=!0,this.needCatchTip=!1}return e.prototype.fetchData=function(e,t,r,u,s,a){return void 0===u&&(u={}),void 0===s&&(s=!1),void 0===a&&(a="json"),o(this,void 0,void 0,(function(){var o=this;return i(this,(function(i){switch(i.label){case 0:this.initHeader={Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},this.isIhr&&(this.initHeader["X-XSRF-TOKEN"]=this.xsrfToken),this.headers="json"===a?Object.assign(this.initHeader,{"Content-Type":s?"multipart/form-data":"application/json"}):s?this.isIhr?{"X-XSRF-TOKEN":this.xsrfToken}:{}:this.headers=Object.assign(this.initHeader,{"Content-Type":s?"multipart/form-data":"application/json",authorization:"authorization-text"}),this.data="get"===t?{method:t,headers:Object.assign(this.initHeader,n({"Content-Type":"application/json"},u)),credentials:this.credentials}:{method:t,headers:Object.assign(this.headers,u),credentials:this.credentials,body:"get"===t?"":"text"===a?r:JSON.stringify(r)},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e,this.data).catch((function(t){return o.handlerErr(t,e)}))];case 2:return[2,i.sent()];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},e}();t.default=s}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{__webpack_require__(7753);var e=__webpack_require__(7536),t=__webpack_require__(919),r=__webpack_require__(5571),n={},o={},i=0,u=new e.default;console.log("*****",u.currentRegisterUrl),new e.default,new t.default;new Proxy({registerInfo:{}},{get:function(e,t){return e[t]},set:function(e,t,r){return Reflect.set(e,t,r)}});function s(e,t,n){r.updatePulishStatus(e,t).then((function(e){0===e.res.code&&e.res.data&&(console.log("#发布成功"),chrome.tabs.reload(n,{bypassCache:!1},(function(){console.log("The tab has been reloaded")})))}))}chrome.runtime.onMessage.addListener((function(e,t,r){switch(e.type){case"requestBack":return void function(e,t,r){console.log("request ",e),e.requestId,r("收到返回值")}(e,0,r);case"auto-fill":return o[e.data.type]=e.data.accountInfo,delete e.data.accountInfo,n[e.data.type]=e.data,r(),a=e.data.type,c={liepin:"https://lpt.liepin.com/ejobedit/editsocietyejob?ejobActionType=publish",qiancheng:"https://ehire.51job.com/Jobs/JobEdit.aspx?Mark=New",boss:"https://www.zhipin.com/web/boss/job/edit?encryptId=0",lagou:"https://easy.lagou.com/position/multiChannel/createPosition.htm",zhilian:"https://rd6.zhaopin.com/job/publish",ganji:"http://www.ganji.com/pub/pub.php?act=pub&method=load&cid=2&domain=sh&from=uc&_pdt=zhaopin",58:"https://employer.58.com/position/post?/position/display&PGTID=0d000000-0000-0262-9612-77e052768ff4&ClickID=28"},chrome.tabs.create({url:c[a]}),void(i=t.tab.id);case"get-fill-data":r(function(e){return n[e]?n[e]:null}(e.data)),delete n[e.data];case"getAccountInfo":r(o[e.data]);case"publcResult":r(e.data),console.log("tabId",i),console.log("发布成功"),i&&s(u.currentRegisterUrl.url,e.data,i);case"bossPublcResult":console.log("bosstabId",i),r(e.data),console.log("boss发布成功"),i&&s(u.currentRegisterUrl.url,e.data,i)}var a,c}))})()})();